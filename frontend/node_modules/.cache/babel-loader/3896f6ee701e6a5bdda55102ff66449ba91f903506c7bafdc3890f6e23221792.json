{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BranchInventoryPage(_ref){let{branchId,branchName,showNotification}=_ref;const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[showEditModal,setShowEditModal]=useState(false);const[selectedProduct,setSelectedProduct]=useState(null);const[formErrors,setFormErrors]=useState({});const[searchTerm,setSearchTerm]=useState('');const[filterCategory,setFilterCategory]=useState('all');const[formData,setFormData]=useState({name:'',quantity:'',unit:'',minStockLevel:'',maxStockLevel:''});const[showRequestModal,setShowRequestModal]=useState(false);const[selectedItems,setSelectedItems]=useState([]);const[requestingItems,setRequestingItems]=useState([]);const categories=['RO Membranes','Mud-filters','Mineral Cartridge','UV Cartridge','Water Pumps','5L Water Bottles','10L Water Bottles','20L Water Bottles','Other'];const units=['pcs','boxes','liters','kg','units'];useEffect(()=>{if(branchId){fetchProducts();}},[branchId]);const fetchProducts=async()=>{try{setLoading(true);const response=await axios.get(`http://localhost:5000/BranchInventory/branch/${branchId}`);setProducts(response.data.inventory||[]);}catch(error){console.error('Error fetching products:',error);showNotification('Failed to fetch inventory','error');setProducts([]);}finally{setLoading(false);}};const validateForm=()=>{const errors={};if(!formData.name.trim())errors.name='Item name is required';if(!formData.quantity||formData.quantity<0)errors.quantity='Valid quantity is required';if(!formData.unit)errors.unit='Unit is required';if(!formData.minStockLevel||formData.minStockLevel<0)errors.minStockLevel='Valid minimum stock level is required';if(!formData.maxStockLevel||formData.maxStockLevel<formData.minStockLevel)errors.maxStockLevel='Maximum stock level must be greater than minimum';setFormErrors(errors);return Object.keys(errors).length===0;};const handleEdit=product=>{setSelectedProduct(product);setFormData({name:product.name,quantity:product.quantity.toString(),unit:product.unit,minStockLevel:product.minStockLevel.toString(),maxStockLevel:product.maxStockLevel.toString()});setShowEditModal(true);};const handleEditSubmit=async e=>{e.preventDefault();if(!validateForm())return;try{const productData={...formData,branchId,branchName,quantity:parseInt(formData.quantity),minStockLevel:parseInt(formData.minStockLevel),maxStockLevel:parseInt(formData.maxStockLevel)};await axios.put(`http://localhost:5000/BranchInventory/${selectedProduct._id}`,productData);showNotification('Product updated successfully!','success');setShowEditModal(false);setSelectedProduct(null);setFormData({name:'',quantity:'',unit:'',minStockLevel:'',maxStockLevel:''});setFormErrors({});fetchProducts();}catch(error){console.error('Error updating product:',error);showNotification('Failed to update product. Please try again.','error');}};const handleDelete=async productId=>{if(window.confirm('Are you sure you want to delete this product?')){try{await axios.delete(`http://localhost:5000/BranchInventory/${productId}`);showNotification('Product deleted successfully!','success');fetchProducts();}catch(error){console.error('Error deleting product:',error);showNotification('Failed to delete product. Please try again.','error');}}};const getStockStatus=(quantity,minStockLevel)=>{if(quantity<=0)return{status:'Out of Stock',color:'text-red-600',bgColor:'bg-red-100'};if(quantity<=minStockLevel)return{status:'Low Stock',color:'text-orange-600',bgColor:'bg-orange-100'};return{status:'In Stock',color:'text-green-600',bgColor:'bg-green-100'};};const filteredProducts=products.filter(product=>{const matchesCategory=filterCategory==='all'||product.name===filterCategory;const matchesSearch=(product.name||'').toLowerCase().includes(searchTerm.toLowerCase());return matchesCategory&&matchesSearch;});const getInventoryStats=()=>{const total=products.length;const inStock=products.filter(p=>getStockStatus(p.quantity,p.minStockLevel).status==='In Stock').length;const lowStock=products.filter(p=>getStockStatus(p.quantity,p.minStockLevel).status==='Low Stock').length;const outOfStock=products.filter(p=>getStockStatus(p.quantity,p.minStockLevel).status==='Out of Stock').length;const totalQuantity=products.reduce((sum,p)=>sum+p.quantity,0);return{total,inStock,lowStock,outOfStock,totalQuantity};};// Factory Request Functions\nconst getLowStockItems=()=>{return products.filter(product=>{const stockStatus=getStockStatus(product.quantity,product.minStockLevel);return stockStatus.status==='Low Stock'||stockStatus.status==='Out of Stock';});};const handleRequestFromFactory=item=>{setSelectedItems([item]);setShowRequestModal(true);};const handleBulkRequest=()=>{const lowStockItems=getLowStockItems();setSelectedItems(lowStockItems);setShowRequestModal(true);};const handleSubmitRequest=async()=>{try{// Validate required data\nif(!branchId||!branchName){showNotification('Branch information is missing. Please refresh the page.','error');return;}if(!selectedItems||selectedItems.length===0){showNotification('No items selected for request.','error');return;}const token=localStorage.getItem('token');if(!token){showNotification('Authentication token missing. Please log in again.','error');return;}setRequestingItems(selectedItems.map(item=>item._id));const requestData={branchId:branchId,branchName:branchName,items:selectedItems.map(item=>({name:item.name,currentQuantity:item.quantity,minStockLevel:item.minStockLevel,maxStockLevel:item.maxStockLevel,requestedQuantity:item.maxStockLevel-item.quantity,unit:item.unit})),status:'pending',requestedAt:new Date().toISOString()};console.log('Submitting factory request:',requestData);console.log('Token:',token);console.log('Branch ID:',branchId);console.log('Branch Name:',branchName);const response=await axios.post('http://localhost:5000/FactoryRequests',requestData,{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});console.log('Response:',response);if(response.status===201){showNotification('Request submitted successfully!','success');setShowRequestModal(false);setSelectedItems([]);}}catch(error){var _error$response,_error$response2,_error$response3,_error$response3$data,_error$response4,_error$response5;console.error('Error submitting request:',error);console.error('Error response:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);console.error('Error status:',(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status);let errorMessage='Failed to submit request. Please try again.';if((_error$response3=error.response)!==null&&_error$response3!==void 0&&(_error$response3$data=_error$response3.data)!==null&&_error$response3$data!==void 0&&_error$response3$data.message){errorMessage=error.response.data.message;}else if(((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.status)===401){errorMessage='Authentication failed. Please log in again.';}else if(((_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.status)===403){errorMessage='Access denied. Branch Manager role required.';}showNotification(errorMessage,'error');}finally{setRequestingItems([]);}};const stats=getInventoryStats();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Inventory Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Manage branch inventory and stock levels\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{fetchProducts();showNotification('Inventory refreshed!','success');},className:\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors\",children:\"\\uD83D\\uDD04 Refresh\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleBulkRequest,disabled:getLowStockItems().length===0,className:`px-4 py-2 rounded-lg transition-colors ${getLowStockItems().length===0?'bg-gray-400 text-white cursor-not-allowed':'bg-orange-600 text-white hover:bg-orange-700'}`,children:[\"\\uD83C\\uDFED Request from Factory (\",getLowStockItems().length,\")\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-5 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-blue-100 text-blue-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Total Items\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.total})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-green-100 text-green-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"In Stock\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.inStock})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-yellow-100 text-yellow-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Low Stock\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.lowStock})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-red-100 text-red-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Out of Stock\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.outOfStock})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-purple-100 text-purple-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Total Quantity\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:stats.totalQuantity.toLocaleString()})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Filter by Item\"}),/*#__PURE__*/_jsxs(\"select\",{value:filterCategory,onChange:e=>setFilterCategory(e.target.value),className:\"border border-gray-300 rounded-md px-3 py-2 text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Items\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))]})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Search Products\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by name or description...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"border border-gray-300 rounded-md px-3 py-2 text-sm w-full md:w-64\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Product Details\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Stock Level\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status & Details\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:filteredProducts.map(product=>{const stockStatus=getStockStatus(product.quantity,product.minStockLevel);const stockPercentage=product.quantity/product.maxStockLevel*100;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:product.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:product.branchName}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-400\",children:[\"Last updated: \",new Date(product.lastUpdated).toLocaleDateString()]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900\",children:[product.quantity,\" \",product.unit]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2 mt-1\",children:/*#__PURE__*/_jsx(\"div\",{className:`h-2 rounded-full ${stockPercentage>=60?'bg-green-600':stockPercentage>=30?'bg-yellow-600':'bg-red-600'}`,style:{width:`${Math.min(stockPercentage,100)}%`}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Min: \",product.minStockLevel,\" | Max: \",product.maxStockLevel]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${stockStatus.bgColor} ${stockStatus.color}`,children:stockStatus.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900\",children:[\"Status: \",stockStatus.status]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"Branch: \",product.branchId]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-400\",children:[\"Unit: \",product.unit]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(product),className:\"text-blue-600 hover:text-blue-900\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(product._id),className:\"text-red-600 hover:text-red-900\",children:\"Delete\"}),(stockStatus.status==='Low Stock'||stockStatus.status==='Out of Stock')&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRequestFromFactory(product),disabled:requestingItems.includes(product._id),className:`px-2 py-1 text-xs rounded ${requestingItems.includes(product._id)?'bg-gray-400 text-white cursor-not-allowed':'bg-orange-600 text-white hover:bg-orange-700'}`,children:requestingItems.includes(product._id)?'Requesting...':'Request'})]})})]},product._id);})})]})}),filteredProducts.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No products found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Try adjusting your search or filter criteria.\"})]})]}),showEditModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Edit Product\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowEditModal(false);setSelectedProduct(null);setFormData({name:'',quantity:'',unit:'',minStockLevel:'',maxStockLevel:''});setFormErrors({});},className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleEditSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Item Name\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.name,onChange:e=>setFormData({...formData,name:e.target.value}),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Item\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))]}),formErrors.name&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-1\",children:formErrors.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:formData.quantity,onChange:e=>setFormData({...formData,quantity:e.target.value}),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"}),formErrors.quantity&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-1\",children:formErrors.quantity})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Unit\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.unit,onChange:e=>setFormData({...formData,unit:e.target.value}),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Unit\"}),units.map(unit=>/*#__PURE__*/_jsx(\"option\",{value:unit,children:unit},unit))]}),formErrors.unit&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-1\",children:formErrors.unit})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Min Stock Level\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:formData.minStockLevel,onChange:e=>setFormData({...formData,minStockLevel:e.target.value}),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"}),formErrors.minStockLevel&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-1\",children:formErrors.minStockLevel})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Max Stock Level\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:formData.maxStockLevel,onChange:e=>setFormData({...formData,maxStockLevel:e.target.value}),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"}),formErrors.maxStockLevel&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-1\",children:formErrors.maxStockLevel})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowEditModal(false);setSelectedProduct(null);setFormData({name:'',quantity:'',unit:'',minStockLevel:'',maxStockLevel:''});setFormErrors({});},className:\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\",children:\"Update Product\"})]})]})]})})}),showRequestModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Request from Factory\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:\"You are requesting the following items from the factory:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"text-sm text-gray-800\",children:selectedItems.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"mb-1\",children:[\"\\u2022 \",item.name,\": \",item.maxStockLevel-item.quantity,\" \",item.unit]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowRequestModal(false),className:\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmitRequest,className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\",children:\"Submit Request\"})]})]})})})]});}export default BranchInventoryPage;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","BranchInventoryPage","_ref","branchId","branchName","showNotification","products","setProducts","loading","setLoading","showEditModal","setShowEditModal","selectedProduct","setSelectedProduct","formErrors","setFormErrors","searchTerm","setSearchTerm","filterCategory","setFilterCategory","formData","setFormData","name","quantity","unit","minStockLevel","maxStockLevel","showRequestModal","setShowRequestModal","selectedItems","setSelectedItems","requestingItems","setRequestingItems","categories","units","fetchProducts","response","get","data","inventory","error","console","validateForm","errors","trim","Object","keys","length","handleEdit","product","toString","handleEditSubmit","e","preventDefault","productData","parseInt","put","_id","handleDelete","productId","window","confirm","delete","getStockStatus","status","color","bgColor","filteredProducts","filter","matchesCategory","matchesSearch","toLowerCase","includes","getInventoryStats","total","inStock","p","lowStock","outOfStock","totalQuantity","reduce","sum","getLowStockItems","stockStatus","handleRequestFromFactory","item","handleBulkRequest","lowStockItems","handleSubmitRequest","token","localStorage","getItem","map","requestData","items","currentQuantity","requestedQuantity","requestedAt","Date","toISOString","log","post","headers","_error$response","_error$response2","_error$response3","_error$response3$data","_error$response4","_error$response5","errorMessage","message","stats","className","children","onClick","disabled","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","toLocaleString","value","onChange","target","category","type","placeholder","stockPercentage","lastUpdated","toLocaleDateString","style","width","Math","min","onSubmit","index"],"sources":["E:/Y2S2/Project/frontend/src/Components/BranchManager/BranchInventoryPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction BranchInventoryPage({ branchId, branchName, showNotification }) {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterCategory, setFilterCategory] = useState('all');\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    quantity: '',\r\n    unit: '',\r\n    minStockLevel: '',\r\n    maxStockLevel: ''\r\n  });\r\n  const [showRequestModal, setShowRequestModal] = useState(false);\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [requestingItems, setRequestingItems] = useState([]);\r\n\r\n  const categories = [\r\n    'RO Membranes',\r\n    'Mud-filters', \r\n    'Mineral Cartridge',\r\n    'UV Cartridge',\r\n    'Water Pumps',\r\n    '5L Water Bottles',\r\n    '10L Water Bottles',\r\n    '20L Water Bottles',\r\n    'Other'\r\n  ];\r\n\r\n  const units = ['pcs', 'boxes', 'liters', 'kg', 'units'];\r\n\r\n  useEffect(() => {\r\n    if (branchId) {\r\n      fetchProducts();\r\n    }\r\n  }, [branchId]);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get(`http://localhost:5000/BranchInventory/branch/${branchId}`);\r\n      setProducts(response.data.inventory || []);\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n      showNotification('Failed to fetch inventory', 'error');\r\n      setProducts([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const errors = {};\r\n    if (!formData.name.trim()) errors.name = 'Item name is required';\r\n    if (!formData.quantity || formData.quantity < 0) errors.quantity = 'Valid quantity is required';\r\n    if (!formData.unit) errors.unit = 'Unit is required';\r\n    if (!formData.minStockLevel || formData.minStockLevel < 0) errors.minStockLevel = 'Valid minimum stock level is required';\r\n    if (!formData.maxStockLevel || formData.maxStockLevel < formData.minStockLevel) errors.maxStockLevel = 'Maximum stock level must be greater than minimum';\r\n    setFormErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  };\r\n\r\n\r\n  const handleEdit = (product) => {\r\n    setSelectedProduct(product);\r\n    setFormData({\r\n      name: product.name,\r\n      quantity: product.quantity.toString(),\r\n      unit: product.unit,\r\n      minStockLevel: product.minStockLevel.toString(),\r\n      maxStockLevel: product.maxStockLevel.toString()\r\n    });\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  const handleEditSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!validateForm()) return;\r\n\r\n    try {\r\n      const productData = {\r\n        ...formData,\r\n        branchId,\r\n        branchName,\r\n        quantity: parseInt(formData.quantity),\r\n        minStockLevel: parseInt(formData.minStockLevel),\r\n        maxStockLevel: parseInt(formData.maxStockLevel)\r\n      };\r\n\r\n      await axios.put(`http://localhost:5000/BranchInventory/${selectedProduct._id}`, productData);\r\n      showNotification('Product updated successfully!', 'success');\r\n      \r\n      setShowEditModal(false);\r\n      setSelectedProduct(null);\r\n      setFormData({\r\n        name: '',\r\n        quantity: '',\r\n        unit: '',\r\n        minStockLevel: '',\r\n        maxStockLevel: ''\r\n      });\r\n      setFormErrors({});\r\n      fetchProducts();\r\n    } catch (error) {\r\n      console.error('Error updating product:', error);\r\n      showNotification('Failed to update product. Please try again.', 'error');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (productId) => {\r\n    if (window.confirm('Are you sure you want to delete this product?')) {\r\n      try {\r\n        await axios.delete(`http://localhost:5000/BranchInventory/${productId}`);\r\n        showNotification('Product deleted successfully!', 'success');\r\n        fetchProducts();\r\n      } catch (error) {\r\n        console.error('Error deleting product:', error);\r\n        showNotification('Failed to delete product. Please try again.', 'error');\r\n      }\r\n    }\r\n  };\r\n\r\n  const getStockStatus = (quantity, minStockLevel) => {\r\n    if (quantity <= 0) return { status: 'Out of Stock', color: 'text-red-600', bgColor: 'bg-red-100' };\r\n    if (quantity <= minStockLevel) return { status: 'Low Stock', color: 'text-orange-600', bgColor: 'bg-orange-100' };\r\n    return { status: 'In Stock', color: 'text-green-600', bgColor: 'bg-green-100' };\r\n  };\r\n\r\n  const filteredProducts = products.filter(product => {\r\n    const matchesCategory = filterCategory === 'all' || product.name === filterCategory;\r\n    const matchesSearch = (product.name || '').toLowerCase().includes(searchTerm.toLowerCase());\r\n    return matchesCategory && matchesSearch;\r\n  });\r\n\r\n  const getInventoryStats = () => {\r\n    const total = products.length;\r\n    const inStock = products.filter(p => getStockStatus(p.quantity, p.minStockLevel).status === 'In Stock').length;\r\n    const lowStock = products.filter(p => getStockStatus(p.quantity, p.minStockLevel).status === 'Low Stock').length;\r\n    const outOfStock = products.filter(p => getStockStatus(p.quantity, p.minStockLevel).status === 'Out of Stock').length;\r\n    const totalQuantity = products.reduce((sum, p) => sum + p.quantity, 0);\r\n    return { total, inStock, lowStock, outOfStock, totalQuantity };\r\n  };\r\n\r\n  // Factory Request Functions\r\n  const getLowStockItems = () => {\r\n    return products.filter(product => {\r\n      const stockStatus = getStockStatus(product.quantity, product.minStockLevel);\r\n      return stockStatus.status === 'Low Stock' || stockStatus.status === 'Out of Stock';\r\n    });\r\n  };\r\n\r\n  const handleRequestFromFactory = (item) => {\r\n    setSelectedItems([item]);\r\n    setShowRequestModal(true);\r\n  };\r\n\r\n  const handleBulkRequest = () => {\r\n    const lowStockItems = getLowStockItems();\r\n    setSelectedItems(lowStockItems);\r\n    setShowRequestModal(true);\r\n  };\r\n\r\n  const handleSubmitRequest = async () => {\r\n    try {\r\n      // Validate required data\r\n      if (!branchId || !branchName) {\r\n        showNotification('Branch information is missing. Please refresh the page.', 'error');\r\n        return;\r\n      }\r\n\r\n      if (!selectedItems || selectedItems.length === 0) {\r\n        showNotification('No items selected for request.', 'error');\r\n        return;\r\n      }\r\n\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        showNotification('Authentication token missing. Please log in again.', 'error');\r\n        return;\r\n      }\r\n\r\n      setRequestingItems(selectedItems.map(item => item._id));\r\n      \r\n      const requestData = {\r\n        branchId: branchId,\r\n        branchName: branchName,\r\n        items: selectedItems.map(item => ({\r\n          name: item.name,\r\n          currentQuantity: item.quantity,\r\n          minStockLevel: item.minStockLevel,\r\n          maxStockLevel: item.maxStockLevel,\r\n          requestedQuantity: item.maxStockLevel - item.quantity,\r\n          unit: item.unit\r\n        })),\r\n        status: 'pending',\r\n        requestedAt: new Date().toISOString()\r\n      };\r\n\r\n      console.log('Submitting factory request:', requestData);\r\n      console.log('Token:', token);\r\n      console.log('Branch ID:', branchId);\r\n      console.log('Branch Name:', branchName);\r\n\r\n      const response = await axios.post('http://localhost:5000/FactoryRequests', requestData, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      console.log('Response:', response);\r\n\r\n      if (response.status === 201) {\r\n        showNotification('Request submitted successfully!', 'success');\r\n        setShowRequestModal(false);\r\n        setSelectedItems([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting request:', error);\r\n      console.error('Error response:', error.response?.data);\r\n      console.error('Error status:', error.response?.status);\r\n      \r\n      let errorMessage = 'Failed to submit request. Please try again.';\r\n      if (error.response?.data?.message) {\r\n        errorMessage = error.response.data.message;\r\n      } else if (error.response?.status === 401) {\r\n        errorMessage = 'Authentication failed. Please log in again.';\r\n      } else if (error.response?.status === 403) {\r\n        errorMessage = 'Access denied. Branch Manager role required.';\r\n      }\r\n      \r\n      showNotification(errorMessage, 'error');\r\n    } finally {\r\n      setRequestingItems([]);\r\n    }\r\n  };\r\n\r\n  const stats = getInventoryStats();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">Inventory Management</h1>\r\n            <p className=\"text-gray-600\">Manage branch inventory and stock levels</p>\r\n          </div>\r\n          <div className=\"flex space-x-3\">\r\n            <button\r\n              onClick={() => {\r\n                fetchProducts();\r\n                showNotification('Inventory refreshed!', 'success');\r\n              }}\r\n              className=\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors\"\r\n            >\r\n              🔄 Refresh\r\n            </button>\r\n            <button\r\n              onClick={handleBulkRequest}\r\n              disabled={getLowStockItems().length === 0}\r\n              className={`px-4 py-2 rounded-lg transition-colors ${\r\n                getLowStockItems().length === 0 \r\n                  ? 'bg-gray-400 text-white cursor-not-allowed' \r\n                  : 'bg-orange-600 text-white hover:bg-orange-700'\r\n              }`}\r\n            >\r\n              🏭 Request from Factory ({getLowStockItems().length})\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Statistics Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-5 gap-6\">\r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"p-3 rounded-full bg-blue-100 text-blue-600\">\r\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\r\n              </svg>\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <p className=\"text-sm font-medium text-gray-600\">Total Items</p>\r\n              <p className=\"text-2xl font-semibold text-gray-900\">{stats.total}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"p-3 rounded-full bg-green-100 text-green-600\">\r\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n              </svg>\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <p className=\"text-sm font-medium text-gray-600\">In Stock</p>\r\n              <p className=\"text-2xl font-semibold text-gray-900\">{stats.inStock}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"p-3 rounded-full bg-yellow-100 text-yellow-600\">\r\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\r\n              </svg>\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <p className=\"text-sm font-medium text-gray-600\">Low Stock</p>\r\n              <p className=\"text-2xl font-semibold text-gray-900\">{stats.lowStock}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"p-3 rounded-full bg-red-100 text-red-600\">\r\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <p className=\"text-sm font-medium text-gray-600\">Out of Stock</p>\r\n              <p className=\"text-2xl font-semibold text-gray-900\">{stats.outOfStock}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"p-3 rounded-full bg-purple-100 text-purple-600\">\r\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\" />\r\n              </svg>\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <p className=\"text-sm font-medium text-gray-600\">Total Quantity</p>\r\n              <p className=\"text-2xl font-semibold text-gray-900\">{stats.totalQuantity.toLocaleString()}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters and Search */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0\">\r\n          <div className=\"flex space-x-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Filter by Item</label>\r\n              <select\r\n                value={filterCategory}\r\n                onChange={(e) => setFilterCategory(e.target.value)}\r\n                className=\"border border-gray-300 rounded-md px-3 py-2 text-sm\"\r\n              >\r\n                <option value=\"all\">All Items</option>\r\n                {categories.map(category => (\r\n                  <option key={category} value={category}>{category}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Search Products</label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search by name or description...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"border border-gray-300 rounded-md px-3 py-2 text-sm w-full md:w-64\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Products Table */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full divide-y divide-gray-200\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Product Details\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Stock Level\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Status\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Status & Details\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Actions\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n              {filteredProducts.map((product) => {\r\n                const stockStatus = getStockStatus(product.quantity, product.minStockLevel);\r\n                const stockPercentage = (product.quantity / product.maxStockLevel) * 100;\r\n                \r\n                return (\r\n                  <tr key={product._id} className=\"hover:bg-gray-50\">\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div>\r\n                        <div className=\"text-sm font-medium text-gray-900\">{product.name}</div>\r\n                        <div className=\"text-sm text-gray-500\">{product.branchName}</div>\r\n                        <div className=\"text-xs text-gray-400\">Last updated: {new Date(product.lastUpdated).toLocaleDateString()}</div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div>\r\n                        <div className=\"text-sm font-medium text-gray-900\">\r\n                          {product.quantity} {product.unit}\r\n                        </div>\r\n                        <div className=\"w-full bg-gray-200 rounded-full h-2 mt-1\">\r\n                          <div \r\n                            className={`h-2 rounded-full ${\r\n                              stockPercentage >= 60 ? 'bg-green-600' :\r\n                              stockPercentage >= 30 ? 'bg-yellow-600' : 'bg-red-600'\r\n                            }`}\r\n                            style={{ width: `${Math.min(stockPercentage, 100)}%` }}\r\n                          ></div>\r\n                        </div>\r\n                        <div className=\"text-xs text-gray-500 mt-1\">\r\n                          Min: {product.minStockLevel} | Max: {product.maxStockLevel}\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${stockStatus.bgColor} ${stockStatus.color}`}>\r\n                        {stockStatus.status}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div>\r\n                        <div className=\"text-sm font-medium text-gray-900\">\r\n                          Status: {stockStatus.status}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-500\">Branch: {product.branchId}</div>\r\n                        <div className=\"text-xs text-gray-400\">Unit: {product.unit}</div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                      <div className=\"flex space-x-2\">\r\n                        <button\r\n                          onClick={() => handleEdit(product)}\r\n                          className=\"text-blue-600 hover:text-blue-900\"\r\n                        >\r\n                          Edit\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleDelete(product._id)}\r\n                          className=\"text-red-600 hover:text-red-900\"\r\n                        >\r\n                          Delete\r\n                        </button>\r\n                        {(stockStatus.status === 'Low Stock' || stockStatus.status === 'Out of Stock') && (\r\n                          <button\r\n                            onClick={() => handleRequestFromFactory(product)}\r\n                            disabled={requestingItems.includes(product._id)}\r\n                            className={`px-2 py-1 text-xs rounded ${\r\n                              requestingItems.includes(product._id)\r\n                                ? 'bg-gray-400 text-white cursor-not-allowed'\r\n                                : 'bg-orange-600 text-white hover:bg-orange-700'\r\n                            }`}\r\n                          >\r\n                            {requestingItems.includes(product._id) ? 'Requesting...' : 'Request'}\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        \r\n        {filteredProducts.length === 0 && (\r\n          <div className=\"text-center py-12\">\r\n            <div className=\"text-gray-400 mb-4\">\r\n              <svg className=\"mx-auto h-12 w-12\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\r\n              </svg>\r\n            </div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No products found</h3>\r\n            <p className=\"text-gray-500\">Try adjusting your search or filter criteria.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n\r\n      {/* Edit Product Modal */}\r\n      {showEditModal && (\r\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\r\n          <div className=\"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white\">\r\n            <div className=\"mt-3\">\r\n              <div className=\"flex justify-between items-center mb-4\">\r\n                <h3 className=\"text-lg font-medium text-gray-900\">Edit Product</h3>\r\n                <button\r\n                  onClick={() => {\r\n                    setShowEditModal(false);\r\n                    setSelectedProduct(null);\r\n                    setFormData({\r\n                      name: '',\r\n                      quantity: '',\r\n                      unit: '',\r\n                      minStockLevel: '',\r\n                      maxStockLevel: ''\r\n                    });\r\n                    setFormErrors({});\r\n                  }}\r\n                  className=\"text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n              \r\n              <form onSubmit={handleEditSubmit}>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Item Name</label>\r\n                    <select\r\n                      value={formData.name}\r\n                      onChange={(e) => setFormData({...formData, name: e.target.value})}\r\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                    >\r\n                      <option value=\"\">Select Item</option>\r\n                      {categories.map(category => (\r\n                        <option key={category} value={category}>{category}</option>\r\n                      ))}\r\n                    </select>\r\n                    {formErrors.name && (\r\n                      <p className=\"text-red-500 text-xs mt-1\">{formErrors.name}</p>\r\n                    )}\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Quantity</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={formData.quantity}\r\n                      onChange={(e) => setFormData({...formData, quantity: e.target.value})}\r\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                    />\r\n                    {formErrors.quantity && (\r\n                      <p className=\"text-red-500 text-xs mt-1\">{formErrors.quantity}</p>\r\n                    )}\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Unit</label>\r\n                    <select\r\n                      value={formData.unit}\r\n                      onChange={(e) => setFormData({...formData, unit: e.target.value})}\r\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                    >\r\n                      <option value=\"\">Select Unit</option>\r\n                      {units.map(unit => (\r\n                        <option key={unit} value={unit}>{unit}</option>\r\n                      ))}\r\n                    </select>\r\n                    {formErrors.unit && (\r\n                      <p className=\"text-red-500 text-xs mt-1\">{formErrors.unit}</p>\r\n                    )}\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Min Stock Level</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={formData.minStockLevel}\r\n                      onChange={(e) => setFormData({...formData, minStockLevel: e.target.value})}\r\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                    />\r\n                    {formErrors.minStockLevel && (\r\n                      <p className=\"text-red-500 text-xs mt-1\">{formErrors.minStockLevel}</p>\r\n                    )}\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Max Stock Level</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={formData.maxStockLevel}\r\n                      onChange={(e) => setFormData({...formData, maxStockLevel: e.target.value})}\r\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                    />\r\n                    {formErrors.maxStockLevel && (\r\n                      <p className=\"text-red-500 text-xs mt-1\">{formErrors.maxStockLevel}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end space-x-3\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setShowEditModal(false);\r\n                      setSelectedProduct(null);\r\n                      setFormData({\r\n                        name: '',\r\n                        quantity: '',\r\n                        unit: '',\r\n                        minStockLevel: '',\r\n                        maxStockLevel: ''\r\n                      });\r\n                      setFormErrors({});\r\n                    }}\r\n                    className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n                  >\r\n                    Update Product\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Factory Request Modal */}\r\n      {showRequestModal && (\r\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\r\n          <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\r\n            <div className=\"mt-3\">\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n                Request from Factory\r\n              </h3>\r\n              <div className=\"mb-4\">\r\n                <p className=\"text-sm text-gray-600 mb-2\">\r\n                  You are requesting the following items from the factory:\r\n                </p>\r\n                <ul className=\"text-sm text-gray-800\">\r\n                  {selectedItems.map((item, index) => (\r\n                    <li key={index} className=\"mb-1\">\r\n                      • {item.name}: {item.maxStockLevel - item.quantity} {item.unit}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n              <div className=\"flex justify-end space-x-3\">\r\n                <button\r\n                  onClick={() => setShowRequestModal(false)}\r\n                  className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={handleSubmitRequest}\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Submit Request\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BranchInventoryPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}