{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import UniversalNavbar from'../Nav/UniversalNavbar';import{useAuth}from'../../Context/AuthContext';import{employeeAPI,branchAPI}from'../../utils/apiService';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AddEmployee=()=>{const{user}=useAuth();const navigate=useNavigate();const[formData,setFormData]=useState({name:'',email:'',phone:'',role:'Branch Manager',branch:'',address:'',salary:'',password:'',confirmPassword:''});const[loading,setLoading]=useState(false);const[errors,setErrors]=useState({});const[branches,setBranches]=useState([]);const[fetchingBranches,setFetchingBranches]=useState(true);// Navigation guard - ensure only Admin users can access\nuseEffect(()=>{if(user&&user.role!=='Admin'){console.error('Access denied: User does not have Admin privileges');navigate('/login');}},[user,navigate]);// Fetch branches from API\nuseEffect(()=>{const fetchBranches=async()=>{try{console.log('🔄 Starting to fetch branches...');setFetchingBranches(true);const response=await branchAPI.getAllBranches();console.log('📡 Branch API response:',response);if(response&&response.success&&response.branches){console.log('📋 Raw branch data:',response.branches);// Transform branches data for dropdown\nconst branchOptions=response.branches.map(branch=>({value:branch.name,label:`${branch.name} - ${branch.location}`}));// Note: All branches come from the database, no need to add hardcoded branches\nconsole.log('🎯 Transformed branch options:',branchOptions);setBranches(branchOptions);}else{console.warn('⚠️ No branch data in response:',response);}}catch(error){console.error('❌ Error fetching branches:',error);// Fallback to default branches if API fails\nsetBranches([{value:'Colombo Central',label:'Colombo Central'},{value:'Kandy Branch',label:'Kandy Branch'},{value:'Galle Branch',label:'Galle Branch'},{value:'Main Factory',label:'Main Factory'}]);}finally{setFetchingBranches(false);console.log('✅ Finished fetching branches');}};fetchBranches();},[]);// Debug branches loading\nuseEffect(()=>{console.log('🔍 Current branches state:',branches);console.log('🔄 Fetching branches state:',fetchingBranches);},[branches,fetchingBranches]);// If user is not authenticated or doesn't have the right role, show loading\nif(!user||user.role!=='Admin'){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"})});}const roles=[{value:'Branch Manager',label:'Branch Manager'},{value:'Factory Manager',label:'Factory Manager'},{value:'Driver',label:'Driver'}];const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));// Clear error when user starts typing\nif(errors[name]){setErrors(prev=>({...prev,[name]:''}));}};const validateForm=()=>{const newErrors={};if(!formData.name.trim()){newErrors.name='Name is required';}if(!formData.email.trim()){newErrors.email='Email is required';}else if(!/\\S+@\\S+\\.\\S+/.test(formData.email)){newErrors.email='Email is invalid';}if(!formData.phone.trim()){newErrors.phone='Phone number is required';}if(!formData.branch){newErrors.branch='Branch is required';}if(!formData.address.trim()){newErrors.address='Address is required';}if(!formData.salary){newErrors.salary='Salary is required';}else if(isNaN(formData.salary)||parseFloat(formData.salary)<=0){newErrors.salary='Salary must be a positive number';}if(!formData.password){newErrors.password='Password is required';}else if(formData.password.length<6){newErrors.password='Password must be at least 6 characters';}if(formData.password!==formData.confirmPassword){newErrors.confirmPassword='Passwords do not match';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setLoading(true);try{// Prepare employee data for API\nconst employeeData={name:formData.name,email:formData.email,password:formData.password,role:formData.role,phone:formData.phone,branch:formData.branch,address:formData.address,salary:parseFloat(formData.salary),status:'Active'};// Add role-specific fields\nif(formData.role==='Branch Manager'){employeeData.branchName=formData.branch;employeeData.branchLocation=formData.address;}else if(formData.role==='Driver'){// Add required driver fields\nemployeeData.driverId=`DRIVER_${Date.now()}`;employeeData.vehicleType='Not specified';employeeData.vehicleNumber='Not specified';employeeData.licenseNumber='Not specified';employeeData.driverStatus='Available';employeeData.branchName=formData.branch;}console.log('Creating employee with data:',employeeData);// Call the API to create employee\nconst response=await employeeAPI.createEmployee(employeeData);console.log('Employee created successfully:',response);// Show success message\nalert('Employee created successfully! The employee can now login using their email and password.');// Navigate based on employee role\nif(formData.role==='Driver'){// Navigate to branch manager drivers page\nnavigate('/branch-manager/drivers');}else{// Navigate back to admin dashboard for other roles\nnavigate('/admin-dashboard');}}catch(error){var _error$response,_error$response$data;console.error('Error creating employee:',error);const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message||'Failed to create employee. Please try again.';alert('Error: '+errorMessage);}finally{setLoading(false);}};const handleCancel=()=>{navigate('/admin-dashboard');};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(UniversalNavbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-16\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Add New Employee\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"Create a new employee account with role-based access\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCancel,className:\"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors duration-200\",children:\"Cancel\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm p-8\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Personal Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Full Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleInputChange,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${errors.name?'border-red-500':'border-gray-300'}`,placeholder:\"Enter full name\"}),errors.name&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Email Address *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleInputChange,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${errors.email?'border-red-500':'border-gray-300'}`,placeholder:\"Enter email address\"}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Phone Number *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",value:formData.phone,onChange:handleInputChange,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${errors.phone?'border-red-500':'border-gray-300'}`,placeholder:\"Enter phone number\"}),errors.phone&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.phone})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Address *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",value:formData.address,onChange:handleInputChange,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${errors.address?'border-red-500':'border-gray-300'}`,placeholder:\"Enter address\"}),errors.address&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.address})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Employment Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Role *\"}),/*#__PURE__*/_jsx(\"select\",{name:\"role\",value:formData.role,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:roles.map(role=>/*#__PURE__*/_jsx(\"option\",{value:role.value,children:role.label},role.value))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Branch *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"branch\",value:formData.branch,onChange:handleInputChange,disabled:fetchingBranches,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${errors.branch?'border-red-500':'border-gray-300'} ${fetchingBranches?'bg-gray-100 cursor-not-allowed':''}`,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:fetchingBranches?'Loading branches...':'Select a branch'}),branches.map(branch=>/*#__PURE__*/_jsx(\"option\",{value:branch.value,children:branch.label},branch.value))]}),errors.branch&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.branch}),fetchingBranches&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Loading available branches...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Salary (LKR) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"salary\",value:formData.salary,onChange:handleInputChange,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${errors.salary?'border-red-500':'border-gray-300'}`,placeholder:\"Enter salary\",min:\"0\",step:\"1000\"}),errors.salary&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.salary})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Account Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Password *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleInputChange,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${errors.password?'border-red-500':'border-gray-300'}`,placeholder:\"Enter password\"}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.password})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Confirm Password *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirmPassword\",value:formData.confirmPassword,onChange:handleInputChange,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${errors.confirmPassword?'border-red-500':'border-gray-300'}`,placeholder:\"Confirm password\"}),errors.confirmPassword&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.confirmPassword})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-semibold text-blue-900 mb-2\",children:\"Role Permissions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-blue-800 space-y-1\",children:[formData.role==='Branch Manager'&&/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Manage branch orders and inventory\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Handle customer requests\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Manage recycling operations\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Generate branch reports\"})]}),formData.role==='Factory Manager'&&/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Manage factory production\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Handle bulk orders\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Monitor quality control\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Generate factory reports\"})]}),formData.role==='Driver'&&/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Manage deliveries\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Update delivery status\"}),/*#__PURE__*/_jsx(\"li\",{children:\"View delivery routes\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Generate delivery logs\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancel,className:\"bg-gray-500 text-white px-6 py-3 rounded-md hover:bg-gray-600 transition-colors duration-200\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"}),\"Creating Employee...\"]}):'Create Employee'})]})]})})]})})]});};export default AddEmployee;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","UniversalNavbar","useAuth","employeeAPI","branchAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AddEmployee","user","navigate","formData","setFormData","name","email","phone","role","branch","address","salary","password","confirmPassword","loading","setLoading","errors","setErrors","branches","setBranches","fetchingBranches","setFetchingBranches","console","error","fetchBranches","log","response","getAllBranches","success","branchOptions","map","value","label","location","warn","className","children","roles","handleInputChange","e","target","prev","validateForm","newErrors","trim","test","isNaN","parseFloat","length","Object","keys","handleSubmit","preventDefault","employeeData","status","branchName","branchLocation","driverId","Date","now","vehicleType","vehicleNumber","licenseNumber","driverStatus","createEmployee","alert","_error$response","_error$response$data","errorMessage","data","message","handleCancel","onClick","onSubmit","type","onChange","placeholder","disabled","min","step"],"sources":["E:/Y2S2/Project/frontend/src/Components/Admin/AddEmployee.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport UniversalNavbar from '../Nav/UniversalNavbar';\r\nimport { useAuth } from '../../Context/AuthContext';\r\nimport { employeeAPI, branchAPI } from '../../utils/apiService';\r\n\r\nconst AddEmployee = () => {\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    phone: '',\r\n    role: 'Branch Manager',\r\n    branch: '',\r\n    address: '',\r\n    salary: '',\r\n    password: '',\r\n    confirmPassword: ''\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [branches, setBranches] = useState([]);\r\n  const [fetchingBranches, setFetchingBranches] = useState(true);\r\n\r\n  // Navigation guard - ensure only Admin users can access\r\n  useEffect(() => {\r\n    if (user && user.role !== 'Admin') {\r\n      console.error('Access denied: User does not have Admin privileges');\r\n      navigate('/login');\r\n    }\r\n  }, [user, navigate]);\r\n\r\n  // Fetch branches from API\r\n  useEffect(() => {\r\n    const fetchBranches = async () => {\r\n      try {\r\n        console.log('🔄 Starting to fetch branches...');\r\n        setFetchingBranches(true);\r\n        const response = await branchAPI.getAllBranches();\r\n        console.log('📡 Branch API response:', response);\r\n        \r\n        if (response && response.success && response.branches) {\r\n          console.log('📋 Raw branch data:', response.branches);\r\n          // Transform branches data for dropdown\r\n          const branchOptions = response.branches.map(branch => ({\r\n            value: branch.name,\r\n            label: `${branch.name} - ${branch.location}`\r\n          }));\r\n          \r\n          // Note: All branches come from the database, no need to add hardcoded branches\r\n          \r\n          console.log('🎯 Transformed branch options:', branchOptions);\r\n          setBranches(branchOptions);\r\n        } else {\r\n          console.warn('⚠️ No branch data in response:', response);\r\n        }\r\n      } catch (error) {\r\n        console.error('❌ Error fetching branches:', error);\r\n        // Fallback to default branches if API fails\r\n        setBranches([\r\n          { value: 'Colombo Central', label: 'Colombo Central' },\r\n          { value: 'Kandy Branch', label: 'Kandy Branch' },\r\n          { value: 'Galle Branch', label: 'Galle Branch' },\r\n          { value: 'Main Factory', label: 'Main Factory' }\r\n        ]);\r\n      } finally {\r\n        setFetchingBranches(false);\r\n        console.log('✅ Finished fetching branches');\r\n      }\r\n    };\r\n\r\n    fetchBranches();\r\n  }, []);\r\n\r\n  // Debug branches loading\r\n  useEffect(() => {\r\n    console.log('🔍 Current branches state:', branches);\r\n    console.log('🔄 Fetching branches state:', fetchingBranches);\r\n  }, [branches, fetchingBranches]);\r\n\r\n  // If user is not authenticated or doesn't have the right role, show loading\r\n  if (!user || user.role !== 'Admin') {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const roles = [\r\n    { value: 'Branch Manager', label: 'Branch Manager' },\r\n    { value: 'Factory Manager', label: 'Factory Manager' },\r\n    { value: 'Driver', label: 'Driver' }\r\n  ];\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n    // Clear error when user starts typing\r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData.name.trim()) {\r\n      newErrors.name = 'Name is required';\r\n    }\r\n\r\n    if (!formData.email.trim()) {\r\n      newErrors.email = 'Email is required';\r\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\r\n      newErrors.email = 'Email is invalid';\r\n    }\r\n\r\n    if (!formData.phone.trim()) {\r\n      newErrors.phone = 'Phone number is required';\r\n    }\r\n\r\n    if (!formData.branch) {\r\n      newErrors.branch = 'Branch is required';\r\n    }\r\n\r\n    if (!formData.address.trim()) {\r\n      newErrors.address = 'Address is required';\r\n    }\r\n\r\n    if (!formData.salary) {\r\n      newErrors.salary = 'Salary is required';\r\n    } else if (isNaN(formData.salary) || parseFloat(formData.salary) <= 0) {\r\n      newErrors.salary = 'Salary must be a positive number';\r\n    }\r\n\r\n    if (!formData.password) {\r\n      newErrors.password = 'Password is required';\r\n    } else if (formData.password.length < 6) {\r\n      newErrors.password = 'Password must be at least 6 characters';\r\n    }\r\n\r\n    if (formData.password !== formData.confirmPassword) {\r\n      newErrors.confirmPassword = 'Passwords do not match';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Prepare employee data for API\r\n      const employeeData = {\r\n        name: formData.name,\r\n        email: formData.email,\r\n        password: formData.password,\r\n        role: formData.role,\r\n        phone: formData.phone,\r\n        branch: formData.branch,\r\n        address: formData.address,\r\n        salary: parseFloat(formData.salary),\r\n        status: 'Active'\r\n      };\r\n\r\n      // Add role-specific fields\r\n      if (formData.role === 'Branch Manager') {\r\n        employeeData.branchName = formData.branch;\r\n        employeeData.branchLocation = formData.address;\r\n      } else if (formData.role === 'Driver') {\r\n        // Add required driver fields\r\n        employeeData.driverId = `DRIVER_${Date.now()}`;\r\n        employeeData.vehicleType = 'Not specified';\r\n        employeeData.vehicleNumber = 'Not specified';\r\n        employeeData.licenseNumber = 'Not specified';\r\n        employeeData.driverStatus = 'Available';\r\n        employeeData.branchName = formData.branch;\r\n      }\r\n\r\n      console.log('Creating employee with data:', employeeData);\r\n      \r\n      // Call the API to create employee\r\n      const response = await employeeAPI.createEmployee(employeeData);\r\n      \r\n      console.log('Employee created successfully:', response);\r\n      \r\n      // Show success message\r\n      alert('Employee created successfully! The employee can now login using their email and password.');\r\n      \r\n      // Navigate based on employee role\r\n      if (formData.role === 'Driver') {\r\n        // Navigate to branch manager drivers page\r\n        navigate('/branch-manager/drivers');\r\n      } else {\r\n        // Navigate back to admin dashboard for other roles\r\n        navigate('/admin-dashboard');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating employee:', error);\r\n      const errorMessage = error.response?.data?.message || error.message || 'Failed to create employee. Please try again.';\r\n      alert('Error: ' + errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    navigate('/admin-dashboard');\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <UniversalNavbar />\r\n      <div className=\"pt-16\">\r\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n          {/* Header */}\r\n          <div className=\"mb-8\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-gray-900\">Add New Employee</h1>\r\n                <p className=\"text-gray-600 mt-2\">Create a new employee account with role-based access</p>\r\n              </div>\r\n              <button\r\n                onClick={handleCancel}\r\n                className=\"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors duration-200\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Form */}\r\n          <div className=\"bg-white rounded-lg shadow-sm p-8\">\r\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n              {/* Personal Information */}\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Personal Information</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Full Name *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      value={formData.name}\r\n                      onChange={handleInputChange}\r\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                        errors.name ? 'border-red-500' : 'border-gray-300'\r\n                      }`}\r\n                      placeholder=\"Enter full name\"\r\n                    />\r\n                    {errors.name && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{errors.name}</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Email Address *\r\n                    </label>\r\n                    <input\r\n                      type=\"email\"\r\n                      name=\"email\"\r\n                      value={formData.email}\r\n                      onChange={handleInputChange}\r\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                        errors.email ? 'border-red-500' : 'border-gray-300'\r\n                      }`}\r\n                      placeholder=\"Enter email address\"\r\n                    />\r\n                    {errors.email && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{errors.email}</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Phone Number *\r\n                    </label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      name=\"phone\"\r\n                      value={formData.phone}\r\n                      onChange={handleInputChange}\r\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                        errors.phone ? 'border-red-500' : 'border-gray-300'\r\n                      }`}\r\n                      placeholder=\"Enter phone number\"\r\n                    />\r\n                    {errors.phone && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{errors.phone}</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Address *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"address\"\r\n                      value={formData.address}\r\n                      onChange={handleInputChange}\r\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                        errors.address ? 'border-red-500' : 'border-gray-300'\r\n                      }`}\r\n                      placeholder=\"Enter address\"\r\n                    />\r\n                    {errors.address && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{errors.address}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Employment Information */}\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Employment Information</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Role *\r\n                    </label>\r\n                    <select\r\n                      name=\"role\"\r\n                      value={formData.role}\r\n                      onChange={handleInputChange}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    >\r\n                      {roles.map((role) => (\r\n                        <option key={role.value} value={role.value}>\r\n                          {role.label}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Branch *\r\n                    </label>\r\n                    <select\r\n                      name=\"branch\"\r\n                      value={formData.branch}\r\n                      onChange={handleInputChange}\r\n                      disabled={fetchingBranches}\r\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                        errors.branch ? 'border-red-500' : 'border-gray-300'\r\n                      } ${fetchingBranches ? 'bg-gray-100 cursor-not-allowed' : ''}`}\r\n                    >\r\n                      <option value=\"\">\r\n                        {fetchingBranches ? 'Loading branches...' : 'Select a branch'}\r\n                      </option>\r\n                      {branches.map((branch) => (\r\n                        <option key={branch.value} value={branch.value}>\r\n                          {branch.label}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                    {errors.branch && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{errors.branch}</p>\r\n                    )}\r\n                    {fetchingBranches && (\r\n                      <p className=\"mt-1 text-sm text-gray-500\">Loading available branches...</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Salary (LKR) *\r\n                    </label>\r\n                    <input\r\n                      type=\"number\"\r\n                      name=\"salary\"\r\n                      value={formData.salary}\r\n                      onChange={handleInputChange}\r\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                        errors.salary ? 'border-red-500' : 'border-gray-300'\r\n                      }`}\r\n                      placeholder=\"Enter salary\"\r\n                      min=\"0\"\r\n                      step=\"1000\"\r\n                    />\r\n                    {errors.salary && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{errors.salary}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Account Information */}\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Account Information</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Password *\r\n                    </label>\r\n                    <input\r\n                      type=\"password\"\r\n                      name=\"password\"\r\n                      value={formData.password}\r\n                      onChange={handleInputChange}\r\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                        errors.password ? 'border-red-500' : 'border-gray-300'\r\n                      }`}\r\n                      placeholder=\"Enter password\"\r\n                    />\r\n                    {errors.password && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{errors.password}</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Confirm Password *\r\n                    </label>\r\n                    <input\r\n                      type=\"password\"\r\n                      name=\"confirmPassword\"\r\n                      value={formData.confirmPassword}\r\n                      onChange={handleInputChange}\r\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                        errors.confirmPassword ? 'border-red-500' : 'border-gray-300'\r\n                      }`}\r\n                      placeholder=\"Confirm password\"\r\n                    />\r\n                    {errors.confirmPassword && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{errors.confirmPassword}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Role Information */}\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                <h4 className=\"text-sm font-semibold text-blue-900 mb-2\">Role Permissions</h4>\r\n                <div className=\"text-sm text-blue-800 space-y-1\">\r\n                  {formData.role === 'Branch Manager' && (\r\n                    <ul className=\"list-disc list-inside space-y-1\">\r\n                      <li>Manage branch orders and inventory</li>\r\n                      <li>Handle customer requests</li>\r\n                      <li>Manage recycling operations</li>\r\n                      <li>Generate branch reports</li>\r\n                    </ul>\r\n                  )}\r\n                  {formData.role === 'Factory Manager' && (\r\n                    <ul className=\"list-disc list-inside space-y-1\">\r\n                      <li>Manage factory production</li>\r\n                      <li>Handle bulk orders</li>\r\n                      <li>Monitor quality control</li>\r\n                      <li>Generate factory reports</li>\r\n                    </ul>\r\n                  )}\r\n                  {formData.role === 'Driver' && (\r\n                    <ul className=\"list-disc list-inside space-y-1\">\r\n                      <li>Manage deliveries</li>\r\n                      <li>Update delivery status</li>\r\n                      <li>View delivery routes</li>\r\n                      <li>Generate delivery logs</li>\r\n                    </ul>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Submit Button */}\r\n              <div className=\"flex justify-end space-x-4 pt-6 border-t border-gray-200\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleCancel}\r\n                  className=\"bg-gray-500 text-white px-6 py-3 rounded-md hover:bg-gray-600 transition-colors duration-200\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  className=\"bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\"\r\n                >\r\n                  {loading ? (\r\n                    <>\r\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                      Creating Employee...\r\n                    </>\r\n                  ) : (\r\n                    'Create Employee'\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddEmployee;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}