{"ast":null,"code":"import React from'react';import{Navigate,useLocation}from'react-router-dom';import{useAuth}from'../../Context/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,requiredRole=null}=_ref;const{user,loading,isAuthenticated,hasRole}=useAuth();const location=useLocation();// Show loading spinner while checking authentication\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600\"})});}// If not authenticated, redirect to login\nif(!isAuthenticated()){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location},replace:true});}// If role is required and user doesn't have it, redirect to appropriate dashboard\nif(requiredRole&&!hasRole(requiredRole)){if(hasRole('Branch Manager')){return/*#__PURE__*/_jsx(Navigate,{to:\"/branch-manager\",replace:true});}else if(hasRole('Factory Manager')){return/*#__PURE__*/_jsx(Navigate,{to:\"/factory-manager\",replace:true});}else if(hasRole('Admin')){return/*#__PURE__*/_jsx(Navigate,{to:\"/admin-dashboard\",replace:true});}else if(hasRole('Customer')){return/*#__PURE__*/_jsx(Navigate,{to:\"/customer-dashboard\",replace:true});}else if(hasRole('Driver')){return/*#__PURE__*/_jsx(Navigate,{to:\"/driver-dashboard\",replace:true});}else if(hasRole('Fire Brigade')){return/*#__PURE__*/_jsx(Navigate,{to:\"/fire-brigade-dashboard\",replace:true});}else{return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}}return children;};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","jsx","_jsx","ProtectedRoute","_ref","children","requiredRole","user","loading","isAuthenticated","hasRole","location","className","to","state","from","replace"],"sources":["E:/Y2S2/Project/frontend/src/Components/Auth/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../../Context/AuthContext';\r\n\r\nconst ProtectedRoute = ({ children, requiredRole = null }) => {\r\n    const { user, loading, isAuthenticated, hasRole } = useAuth();\r\n    const location = useLocation();\r\n\r\n    // Show loading spinner while checking authentication\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center\">\r\n                <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // If not authenticated, redirect to login\r\n    if (!isAuthenticated()) {\r\n        return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n    }\r\n\r\n    // If role is required and user doesn't have it, redirect to appropriate dashboard\r\n    if (requiredRole && !hasRole(requiredRole)) {\r\n        if (hasRole('Branch Manager')) {\r\n            return <Navigate to=\"/branch-manager\" replace />;\r\n        } else if (hasRole('Factory Manager')) {\r\n            return <Navigate to=\"/factory-manager\" replace />;\r\n        } else if (hasRole('Admin')) {\r\n            return <Navigate to=\"/admin-dashboard\" replace />;\r\n        } else if (hasRole('Customer')) {\r\n            return <Navigate to=\"/customer-dashboard\" replace />;\r\n        } else if (hasRole('Driver')) {\r\n            return <Navigate to=\"/driver-dashboard\" replace />;\r\n        } else if (hasRole('Fire Brigade')) {\r\n            return <Navigate to=\"/fire-brigade-dashboard\" replace />;\r\n        } else {\r\n            return <Navigate to=\"/login\" replace />;\r\n        }\r\n    }\r\n\r\n    return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,WAAW,KAAQ,kBAAkB,CACxD,OAASC,OAAO,KAAQ,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEpD,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAuC,IAAtC,CAAEC,QAAQ,CAAEC,YAAY,CAAG,IAAK,CAAC,CAAAF,IAAA,CACrD,KAAM,CAAEG,IAAI,CAAEC,OAAO,CAAEC,eAAe,CAAEC,OAAQ,CAAC,CAAGV,OAAO,CAAC,CAAC,CAC7D,KAAM,CAAAW,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAE9B;AACA,GAAIS,OAAO,CAAE,CACT,mBACIN,IAAA,QAAKU,SAAS,CAAC,+CAA+C,CAAAP,QAAA,cAC1DH,IAAA,QAAKU,SAAS,CAAC,kEAAkE,CAAM,CAAC,CACvF,CAAC,CAEd,CAEA;AACA,GAAI,CAACH,eAAe,CAAC,CAAC,CAAE,CACpB,mBAAOP,IAAA,CAACJ,QAAQ,EAACe,EAAE,CAAC,QAAQ,CAACC,KAAK,CAAE,CAAEC,IAAI,CAAEJ,QAAS,CAAE,CAACK,OAAO,MAAE,CAAC,CACtE,CAEA;AACA,GAAIV,YAAY,EAAI,CAACI,OAAO,CAACJ,YAAY,CAAC,CAAE,CACxC,GAAII,OAAO,CAAC,gBAAgB,CAAC,CAAE,CAC3B,mBAAOR,IAAA,CAACJ,QAAQ,EAACe,EAAE,CAAC,iBAAiB,CAACG,OAAO,MAAE,CAAC,CACpD,CAAC,IAAM,IAAIN,OAAO,CAAC,iBAAiB,CAAC,CAAE,CACnC,mBAAOR,IAAA,CAACJ,QAAQ,EAACe,EAAE,CAAC,kBAAkB,CAACG,OAAO,MAAE,CAAC,CACrD,CAAC,IAAM,IAAIN,OAAO,CAAC,OAAO,CAAC,CAAE,CACzB,mBAAOR,IAAA,CAACJ,QAAQ,EAACe,EAAE,CAAC,kBAAkB,CAACG,OAAO,MAAE,CAAC,CACrD,CAAC,IAAM,IAAIN,OAAO,CAAC,UAAU,CAAC,CAAE,CAC5B,mBAAOR,IAAA,CAACJ,QAAQ,EAACe,EAAE,CAAC,qBAAqB,CAACG,OAAO,MAAE,CAAC,CACxD,CAAC,IAAM,IAAIN,OAAO,CAAC,QAAQ,CAAC,CAAE,CAC1B,mBAAOR,IAAA,CAACJ,QAAQ,EAACe,EAAE,CAAC,mBAAmB,CAACG,OAAO,MAAE,CAAC,CACtD,CAAC,IAAM,IAAIN,OAAO,CAAC,cAAc,CAAC,CAAE,CAChC,mBAAOR,IAAA,CAACJ,QAAQ,EAACe,EAAE,CAAC,yBAAyB,CAACG,OAAO,MAAE,CAAC,CAC5D,CAAC,IAAM,CACH,mBAAOd,IAAA,CAACJ,QAAQ,EAACe,EAAE,CAAC,QAAQ,CAACG,OAAO,MAAE,CAAC,CAC3C,CACJ,CAEA,MAAO,CAAAX,QAAQ,CACnB,CAAC,CAED,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}