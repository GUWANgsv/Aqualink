{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BranchRecycleBin(_ref){let{branchId,branchName}=_ref;const[bin,setBin]=useState(null);const[loading,setLoading]=useState(true);const[showUpdateModal,setShowUpdateModal]=useState(false);const[formErrors,setFormErrors]=useState({});const[formData,setFormData]=useState({currentLevel:'',notes:''});// New state for recycling requests\nconst[recyclingRequests,setRecyclingRequests]=useState([]);const[requestsLoading,setRequestsLoading]=useState(true);const[approvalLoading,setApprovalLoading]=useState(false);const[notification,setNotification]=useState(null);// State for collection requests\nconst[collectionRequests,setCollectionRequests]=useState([]);const[collectionRequestsLoading,setCollectionRequestsLoading]=useState(true);useEffect(()=>{fetchBin();fetchRecyclingRequests();fetchCollectionRequests();},[]);const fetchBin=async()=>{try{setLoading(true);console.log('üîç Fetching recycling bin for branch:',branchId);const token=localStorage.getItem('token');if(!token){console.error('‚ùå No authentication token found');return;}// If branchId is the default fallback, try to get all bins and find the first one\nlet response;if(branchId==='BRANCH001'){console.log('‚ö†Ô∏è  Using fallback branchId, fetching all bins');response=await axios.get(`http://localhost:5000/RecyclingBins`,{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});}else{response=await axios.get(`http://localhost:5000/RecyclingBins/branch/${branchId}`,{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});}const bins=response.data.bins||[];console.log('‚úÖ Recycling bin response:',response.data);console.log('üìä Bin data received:',bins.length>0?{binId:bins[0].binId,_id:bins[0]._id,currentLevel:bins[0].currentLevel,capacity:bins[0].capacity,fillPercentage:bins[0].fillPercentage,status:bins[0].status,fullObject:bins[0]}:'No bins');if(bins.length===0){console.log('‚ö†Ô∏è  No recycling bin found for this branch');setBin(null);}else{// Use the first (and only) bin\nsetBin(bins[0]);console.log('‚úÖ Using bin:',bins[0].binId,'with level:',bins[0].currentLevel+'kg/'+bins[0].capacity+'kg');}}catch(error){console.error('‚ùå Error fetching recycling bin:',error);if(error.response){console.error('Response status:',error.response.status);console.error('Response data:',error.response.data);}setBin(null);}finally{setLoading(false);}};const fetchRecyclingRequests=async()=>{try{setRequestsLoading(true);console.log('üîç Fetching recycling requests for branch:',branchId);const token=localStorage.getItem('token');if(!token){console.error('‚ùå No authentication token found');return;}// If branchId is the default fallback, try to get all requests\nlet response;if(branchId==='BRANCH001'){console.log('‚ö†Ô∏è  Using fallback branchId, fetching all requests');response=await axios.get(`http://localhost:5000/RecyclingRequests`,{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});}else{response=await axios.get(`http://localhost:5000/RecyclingRequests/branch/${branchId}`,{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});}console.log('‚úÖ Recycling requests response:',response.data);setRecyclingRequests(response.data.requests||[]);}catch(error){console.error('‚ùå Error fetching recycling requests:',error);if(error.response){console.error('Response status:',error.response.status);console.error('Response data:',error.response.data);}setRecyclingRequests([]);}finally{setRequestsLoading(false);}};const fetchCollectionRequests=async()=>{try{setCollectionRequestsLoading(true);console.log('üîç Fetching collection requests for branch:',branchId);const token=localStorage.getItem('token');if(!token){console.error('‚ùå No authentication token found');return;}const response=await axios.get(`http://localhost:5000/RecyclingRequests/collection/branch/${branchId}`,{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});console.log('‚úÖ Collection requests response:',response.data);setCollectionRequests(response.data.requests||[]);}catch(error){console.error('‚ùå Error fetching collection requests:',error);if(error.response){console.error('Response status:',error.response.status);console.error('Response data:',error.response.data);}setCollectionRequests([]);}finally{setCollectionRequestsLoading(false);}};const handleApproveRequest=async requestId=>{try{setApprovalLoading(true);console.log('üîÑ Approving recycling request:',requestId);const token=localStorage.getItem('token');if(!token){console.error('‚ùå No authentication token found');return;}const response=await axios.put(`http://localhost:5000/RecyclingRequests/${requestId}/approve`,{},{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});console.log('‚úÖ Approval API response:',response.data);// Force refresh both bin and requests data with a small delay\nsetTimeout(async()=>{console.log('üîÑ Refreshing bin and requests data...');await Promise.all([fetchBin(),fetchRecyclingRequests()]);console.log('‚úÖ Data refreshed successfully');},500);// Show success message\nshowNotification('Recycling request approved successfully! The bin has been updated.','success');console.log('‚úÖ Recycling request approved successfully');}catch(error){console.error('‚ùå Error approving recycling request:',error);if(error.response){console.error('Response status:',error.response.status);console.error('Response data:',error.response.data);}showNotification('Failed to approve recycling request. Please try again.','error');}finally{setApprovalLoading(false);}};const handleRejectRequest=async requestId=>{try{setApprovalLoading(true);console.log('üîÑ Rejecting recycling request:',requestId);const token=localStorage.getItem('token');if(!token){console.error('‚ùå No authentication token found');return;}await axios.put(`http://localhost:5000/RecyclingRequests/${requestId}/reject`,{},{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});// Refresh requests data\nawait fetchRecyclingRequests();showNotification('Recycling request rejected successfully.','success');console.log('‚úÖ Recycling request rejected successfully');}catch(error){console.error('‚ùå Error rejecting recycling request:',error);if(error.response){console.error('Response status:',error.response.status);console.error('Response data:',error.response.data);}showNotification('Failed to reject recycling request. Please try again.','error');}finally{setApprovalLoading(false);}};const validateForm=()=>{const errors={};if(!formData.currentLevel||formData.currentLevel<0){errors.currentLevel='Current level must be a non-negative number';}if(parseInt(formData.currentLevel)>100){errors.currentLevel='Current level cannot exceed 100kg capacity';}setFormErrors(errors);return Object.keys(errors).length===0;};const handleUpdate=async e=>{e.preventDefault();try{const binData={notes:formData.notes};await axios.put(`http://localhost:5000/RecyclingBins/${bin._id}`,binData);setShowUpdateModal(false);resetForm();fetchBin();}catch(error){console.error('Error updating bin notes:',error);}};const resetForm=()=>{setFormData({currentLevel:'',notes:''});setFormErrors({});};const openUpdateModal=()=>{setFormData({currentLevel:bin.currentLevel.toString(),notes:bin.notes||''});setShowUpdateModal(true);};const requestCollection=async requestType=>{try{// Validate required data\nif(!branchId){alert('Error: Branch ID is missing. Please refresh the page.');return;}if(!bin||!bin._id){alert('Error: Bin information is missing. Please refresh the page.');console.error('Bin data:',bin);return;}// Log the exact IDs being used\nconsole.log('üîç IDs being used:',{branchId:branchId,branchIdType:typeof branchId,binId:bin._id,binIdType:typeof bin._id,binIdString:bin.binId,fullBinObject:bin});const token=localStorage.getItem('token');if(!token){alert('Error: Authentication token is missing. Please log in again.');return;}console.log('üîÑ Creating collection request with data:',{branchId,binId:bin._id,binIdString:bin.binId,requestType,binInfo:{branchName:bin.branchName,location:bin.location,currentLevel:bin.currentLevel,capacity:bin.capacity}});const response=await axios.post('http://localhost:5000/RecyclingRequests/collection',{branchId:branchId,binId:bin._id,// Use MongoDB _id, not the string binId\nrequestType:requestType,notes:`Collection request for ${requestType.toLowerCase()}`},{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});console.log('‚úÖ Collection request response:',response.data);if(response.data.success){alert(`Collection request submitted successfully! Request ID: ${response.data.request.requestId}`);fetchBin();fetchCollectionRequests();}else{alert(`Error: ${response.data.message||'Unknown error occurred'}`);}}catch(error){console.error('‚ùå Error creating collection request:',error);// Provide more specific error messages\nif(error.response){console.error('Response status:',error.response.status);console.error('Response data:',error.response.data);if(error.response.status===401){alert('Authentication failed. Please log in again.');}else if(error.response.status===404){alert('Recycling bin not found. Please refresh the page.');}else if(error.response.status===400){alert(`Error: ${error.response.data.message||'Invalid request data'}`);}else if(error.response.status===500){alert('Server error. Please try again later.');}else{alert(`Error: ${error.response.data.message||'Failed to create collection request'}`);}}else if(error.request){console.error('Request error:',error.request);alert('Network error. Please check your connection and try again.');}else{console.error('Error:',error.message);alert('Failed to create collection request. Please try again.');}}};const emptyBin=async()=>{const confirmEmpty=window.confirm('Are you sure you want to request bin collection? This will send a request to the factory manager.');if(confirmEmpty){await requestCollection('Empty Bin');}};const notifyFactory=async()=>{const confirmNotify=window.confirm('Are you sure you want to request bin collection? This will send a request to the factory manager.');if(confirmNotify){await requestCollection('90% Full');}};const getStatusColor=status=>{switch(status){case'Empty':return'bg-green-100 text-green-800';case'Low':return'bg-blue-100 text-blue-800';case'Medium':return'bg-yellow-100 text-yellow-800';case'High':return'bg-orange-100 text-orange-800';case'Critical':return'bg-red-100 text-red-800';default:return'bg-gray-100 text-gray-800';}};const getFillLevelColor=percentage=>{if(percentage>=80)return'text-red-600';if(percentage>=60)return'text-orange-600';if(percentage>=40)return'text-yellow-600';if(percentage>=20)return'text-blue-600';return'text-green-600';};const getProgressBarColor=percentage=>{if(percentage>=80)return'bg-red-500';if(percentage>=60)return'bg-orange-500';if(percentage>=40)return'bg-yellow-500';if(percentage>=20)return'bg-blue-500';return'bg-green-500';};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});};const showNotification=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'success';setNotification({message,type});setTimeout(()=>setNotification(null),5000);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"})});}if(!bin){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No recycling bin found for this branch.\"})});}return/*#__PURE__*/_jsxs(\"div\",{children:[notification&&/*#__PURE__*/_jsx(\"div\",{className:`mb-4 p-4 rounded-lg ${notification.type==='success'?'bg-green-100 border border-green-400 text-green-700':'bg-red-100 border border-red-400 text-red-700'}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:notification.type==='success'?'‚úÖ':'‚ùå'}),notification.message]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Branch Recycling Bin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"Branch: \",branchName]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>Promise.all([fetchBin(),fetchRecyclingRequests()]),disabled:loading||requestsLoading,className:\"px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-200 transition-colors disabled:opacity-50\",children:loading||requestsLoading?'üîÑ Refreshing...':'üîÑ Refresh All'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-2xl mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-semibold text-gray-900\",children:bin.binId}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600\",children:bin.location})]}),/*#__PURE__*/_jsx(\"span\",{className:`inline-flex px-3 py-2 text-sm font-semibold rounded-full ${getStatusColor(bin.status)}`,children:bin.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-lg mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700 font-medium\",children:\"Fill Level\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-bold text-xl ${getFillLevelColor(bin.fillPercentage)}`,children:[bin.fillPercentage.toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-4\",children:/*#__PURE__*/_jsx(\"div\",{className:`h-4 rounded-full transition-all duration-300 ${getProgressBarColor(bin.fillPercentage)}`,style:{width:`${bin.fillPercentage}%`}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-8 text-center mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm font-medium\",children:\"Capacity\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:[bin.capacity,\" kg\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm font-medium\",children:\"Current Level\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-green-600\",children:[bin.currentLevel,\" kg\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83C\\uDF31\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-blue-800\",children:\"Recycling Status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-700\",children:bin.fillPercentage>=80?'Critical: Bin is nearly full. Factory has been notified.':bin.fillPercentage>=60?'High: Bin is getting full. Monitor closely.':bin.fillPercentage>=40?'Medium: Bin is moderately filled.':bin.fillPercentage>=20?'Low: Bin has some capacity remaining.':'Empty: Bin is ready for recycling.'})]})]})}),bin.notes&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 font-medium mb-2\",children:\"Notes:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:bin.notes})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:openUpdateModal,className:\"flex-1 bg-blue-600 text-white px-4 py-3 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors\",children:\"Update Notes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:emptyBin,className:\"flex-1 bg-green-600 text-white px-4 py-3 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors\",children:\"Request Collection\"}),bin.fillPercentage>=80&&!bin.isNotified&&/*#__PURE__*/_jsx(\"button\",{onClick:notifyFactory,className:\"flex-1 bg-red-600 text-white px-4 py-3 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors\",children:\"Request Collection (90% Full)\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 mr-2\",children:\"\\u2139\\uFE0F\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:\"}),\" Bin filling happens automatically when customers submit recycling requests. Branch managers can only monitor and manage the bin status.\"]})]})}),bin.isNotified&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-orange-50 border border-orange-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-orange-600 mr-2\",children:\"\\uD83D\\uDD14\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-orange-800 font-medium\",children:\"Factory has been notified about this bin\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 text-center\",children:[\"Last updated: \",new Date(bin.updatedAt).toLocaleString()]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 max-w-6xl mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900\",children:\"Customer Recycling Requests\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchRecyclingRequests,disabled:requestsLoading,className:\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors disabled:opacity-50\",children:requestsLoading?'Refreshing...':'üîÑ Refresh'})]}),requestsLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})}):recyclingRequests.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No recycling requests found for this branch.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Customer\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Waste Weight\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Points Earned\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Request Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:recyclingRequests.map(request=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:request.customerName}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:request.customerEmail})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-900 font-medium\",children:[request.wasteWeight,\" kg\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-900\",children:[request.pointsEarned,\" points\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:formatDate(request.requestDate)})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(request.status)}`,children:request.status})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:[request.status==='Pending'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleApproveRequest(request._id),disabled:approvalLoading,className:\"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 transition-colors disabled:opacity-50\",children:approvalLoading?'Processing...':'‚úÖ Approve'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRejectRequest(request._id),disabled:approvalLoading,className:\"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors disabled:opacity-50\",children:approvalLoading?'Processing...':'‚ùå Reject'})]}),request.status==='Approved'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 font-medium\",children:\"\\u2713 Approved\"}),request.status==='Rejected'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 font-medium\",children:\"\\u2717 Rejected\"}),request.status==='Completed'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-medium\",children:\"\\u2713 Completed\"})]})]},request._id))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 mr-2\",children:\"\\uD83D\\uDCA1\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-green-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"How it works:\"}),\" When you approve a recycling request, the waste weight is automatically added to the bin's current level. The bin will fill up based on the total weight of approved requests.\"]})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 max-w-6xl mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900\",children:\"Collection Requests\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchCollectionRequests,disabled:collectionRequestsLoading,className:\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors disabled:opacity-50\",children:collectionRequestsLoading?'Refreshing...':'üîÑ Refresh'})]}),collectionRequestsLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})}):collectionRequests.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No collection requests found for this branch.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Request ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Bin Level\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Request Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Notes\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:collectionRequests.map(request=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:request.requestId}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${request.requestType==='Empty Bin'?'bg-green-100 text-green-800':'bg-red-100 text-red-800'}`,children:request.requestType})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:[request.currentLevel,\"kg / \",request.capacity,\"kg (\",request.fillPercentage.toFixed(1),\"%)\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${request.status==='Pending'?'bg-yellow-100 text-yellow-800':request.status==='Approved'?'bg-green-100 text-green-800':request.status==='Completed'?'bg-blue-100 text-blue-800':'bg-red-100 text-red-800'}`,children:request.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:new Date(request.requestDate).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-sm text-gray-900\",children:request.notes||'-'})]},request._id))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 mr-2\",children:\"\\u2139\\uFE0F\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Collection Requests:\"}),\" When you request collection, it sends a request to the factory manager. The factory manager will approve and empty the bin, then update the status here.\"]})]})})]})}),showUpdateModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Update Bin Notes\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdate,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Bin ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:bin.binId,disabled:true,className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:bin.location,disabled:true,className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Capacity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:`${bin.capacity} kg`,disabled:true,className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Current Level\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:`${bin.currentLevel} kg (${bin.fillPercentage.toFixed(1)}%)`,disabled:true,className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Level is automatically updated when customers submit recycling requests\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.notes,onChange:e=>setFormData({...formData,notes:e.target.value}),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",rows:\"3\",placeholder:\"Optional notes about this bin\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowUpdateModal(false);resetForm();},className:\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\",children:\"Update Notes\"})]})]})]})})})]});}export default BranchRecycleBin;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","BranchRecycleBin","_ref","branchId","branchName","bin","setBin","loading","setLoading","showUpdateModal","setShowUpdateModal","formErrors","setFormErrors","formData","setFormData","currentLevel","notes","recyclingRequests","setRecyclingRequests","requestsLoading","setRequestsLoading","approvalLoading","setApprovalLoading","notification","setNotification","collectionRequests","setCollectionRequests","collectionRequestsLoading","setCollectionRequestsLoading","fetchBin","fetchRecyclingRequests","fetchCollectionRequests","console","log","token","localStorage","getItem","error","response","get","headers","bins","data","length","binId","_id","capacity","fillPercentage","status","fullObject","requests","handleApproveRequest","requestId","put","setTimeout","Promise","all","showNotification","handleRejectRequest","validateForm","errors","parseInt","Object","keys","handleUpdate","e","preventDefault","binData","resetForm","openUpdateModal","toString","requestCollection","requestType","alert","branchIdType","binIdType","binIdString","fullBinObject","binInfo","location","post","toLowerCase","success","request","message","emptyBin","confirmEmpty","window","confirm","notifyFactory","confirmNotify","getStatusColor","getFillLevelColor","percentage","getProgressBarColor","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","type","arguments","undefined","className","children","onClick","disabled","toFixed","style","width","isNotified","updatedAt","toLocaleString","map","customerName","customerEmail","wasteWeight","pointsEarned","requestDate","onSubmit","value","onChange","target","rows","placeholder"],"sources":["E:/Y2S2/Project/frontend/src/Components/BranchManager/BranchRecycleBin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction BranchRecycleBin({ branchId, branchName }) {\r\n  const [bin, setBin] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showUpdateModal, setShowUpdateModal] = useState(false);\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [formData, setFormData] = useState({\r\n    currentLevel: '',\r\n    notes: ''\r\n  });\r\n  \r\n  // New state for recycling requests\r\n  const [recyclingRequests, setRecyclingRequests] = useState([]);\r\n  const [requestsLoading, setRequestsLoading] = useState(true);\r\n  const [approvalLoading, setApprovalLoading] = useState(false);\r\n  const [notification, setNotification] = useState(null);\r\n  \r\n  // State for collection requests\r\n  const [collectionRequests, setCollectionRequests] = useState([]);\r\n  const [collectionRequestsLoading, setCollectionRequestsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchBin();\r\n    fetchRecyclingRequests();\r\n    fetchCollectionRequests();\r\n  }, []);\r\n\r\n  const fetchBin = async () => {\r\n    try {\r\n      setLoading(true);\r\n      console.log('üîç Fetching recycling bin for branch:', branchId);\r\n      \r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        console.error('‚ùå No authentication token found');\r\n        return;\r\n      }\r\n      \r\n      // If branchId is the default fallback, try to get all bins and find the first one\r\n      let response;\r\n      if (branchId === 'BRANCH001') {\r\n        console.log('‚ö†Ô∏è  Using fallback branchId, fetching all bins');\r\n        response = await axios.get(`http://localhost:5000/RecyclingBins`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n      } else {\r\n        response = await axios.get(`http://localhost:5000/RecyclingBins/branch/${branchId}`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n      }\r\n      \r\n      const bins = response.data.bins || [];\r\n      console.log('‚úÖ Recycling bin response:', response.data);\r\n      console.log('üìä Bin data received:', bins.length > 0 ? {\r\n        binId: bins[0].binId,\r\n        _id: bins[0]._id,\r\n        currentLevel: bins[0].currentLevel,\r\n        capacity: bins[0].capacity,\r\n        fillPercentage: bins[0].fillPercentage,\r\n        status: bins[0].status,\r\n        fullObject: bins[0]\r\n      } : 'No bins');\r\n      \r\n      if (bins.length === 0) {\r\n        console.log('‚ö†Ô∏è  No recycling bin found for this branch');\r\n        setBin(null);\r\n      } else {\r\n        // Use the first (and only) bin\r\n        setBin(bins[0]);\r\n        console.log('‚úÖ Using bin:', bins[0].binId, 'with level:', bins[0].currentLevel + 'kg/' + bins[0].capacity + 'kg');\r\n      }\r\n    } catch (error) {\r\n      console.error('‚ùå Error fetching recycling bin:', error);\r\n      if (error.response) {\r\n        console.error('Response status:', error.response.status);\r\n        console.error('Response data:', error.response.data);\r\n      }\r\n      setBin(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchRecyclingRequests = async () => {\r\n    try {\r\n      setRequestsLoading(true);\r\n      console.log('üîç Fetching recycling requests for branch:', branchId);\r\n      \r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        console.error('‚ùå No authentication token found');\r\n        return;\r\n      }\r\n      \r\n      // If branchId is the default fallback, try to get all requests\r\n      let response;\r\n      if (branchId === 'BRANCH001') {\r\n        console.log('‚ö†Ô∏è  Using fallback branchId, fetching all requests');\r\n        response = await axios.get(`http://localhost:5000/RecyclingRequests`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n      } else {\r\n        response = await axios.get(`http://localhost:5000/RecyclingRequests/branch/${branchId}`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n      }\r\n      \r\n      console.log('‚úÖ Recycling requests response:', response.data);\r\n      setRecyclingRequests(response.data.requests || []);\r\n    } catch (error) {\r\n      console.error('‚ùå Error fetching recycling requests:', error);\r\n      if (error.response) {\r\n        console.error('Response status:', error.response.status);\r\n        console.error('Response data:', error.response.data);\r\n      }\r\n      setRecyclingRequests([]);\r\n    } finally {\r\n      setRequestsLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchCollectionRequests = async () => {\r\n    try {\r\n      setCollectionRequestsLoading(true);\r\n      console.log('üîç Fetching collection requests for branch:', branchId);\r\n      \r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        console.error('‚ùå No authentication token found');\r\n        return;\r\n      }\r\n      \r\n      const response = await axios.get(`http://localhost:5000/RecyclingRequests/collection/branch/${branchId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      \r\n      console.log('‚úÖ Collection requests response:', response.data);\r\n      setCollectionRequests(response.data.requests || []);\r\n    } catch (error) {\r\n      console.error('‚ùå Error fetching collection requests:', error);\r\n      if (error.response) {\r\n        console.error('Response status:', error.response.status);\r\n        console.error('Response data:', error.response.data);\r\n      }\r\n      setCollectionRequests([]);\r\n    } finally {\r\n      setCollectionRequestsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleApproveRequest = async (requestId) => {\r\n    try {\r\n      setApprovalLoading(true);\r\n      console.log('üîÑ Approving recycling request:', requestId);\r\n      \r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        console.error('‚ùå No authentication token found');\r\n        return;\r\n      }\r\n      \r\n      const response = await axios.put(`http://localhost:5000/RecyclingRequests/${requestId}/approve`, {}, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      \r\n      console.log('‚úÖ Approval API response:', response.data);\r\n      \r\n      // Force refresh both bin and requests data with a small delay\r\n      setTimeout(async () => {\r\n        console.log('üîÑ Refreshing bin and requests data...');\r\n        await Promise.all([fetchBin(), fetchRecyclingRequests()]);\r\n        console.log('‚úÖ Data refreshed successfully');\r\n      }, 500);\r\n      \r\n      // Show success message\r\n      showNotification('Recycling request approved successfully! The bin has been updated.', 'success');\r\n      console.log('‚úÖ Recycling request approved successfully');\r\n    } catch (error) {\r\n      console.error('‚ùå Error approving recycling request:', error);\r\n      if (error.response) {\r\n        console.error('Response status:', error.response.status);\r\n        console.error('Response data:', error.response.data);\r\n      }\r\n      showNotification('Failed to approve recycling request. Please try again.', 'error');\r\n    } finally {\r\n      setApprovalLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRejectRequest = async (requestId) => {\r\n    try {\r\n      setApprovalLoading(true);\r\n      console.log('üîÑ Rejecting recycling request:', requestId);\r\n      \r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        console.error('‚ùå No authentication token found');\r\n        return;\r\n      }\r\n      \r\n      await axios.put(`http://localhost:5000/RecyclingRequests/${requestId}/reject`, {}, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      \r\n      // Refresh requests data\r\n      await fetchRecyclingRequests();\r\n      \r\n      showNotification('Recycling request rejected successfully.', 'success');\r\n      console.log('‚úÖ Recycling request rejected successfully');\r\n    } catch (error) {\r\n      console.error('‚ùå Error rejecting recycling request:', error);\r\n      if (error.response) {\r\n        console.error('Response status:', error.response.status);\r\n        console.error('Response data:', error.response.data);\r\n      }\r\n      showNotification('Failed to reject recycling request. Please try again.', 'error');\r\n    } finally {\r\n      setApprovalLoading(false);\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const errors = {};\r\n\r\n    if (!formData.currentLevel || formData.currentLevel < 0) {\r\n      errors.currentLevel = 'Current level must be a non-negative number';\r\n    }\r\n\r\n    if (parseInt(formData.currentLevel) > 100) {\r\n      errors.currentLevel = 'Current level cannot exceed 100kg capacity';\r\n    }\r\n\r\n    setFormErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  };\r\n\r\n  const handleUpdate = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      const binData = {\r\n        notes: formData.notes\r\n      };\r\n\r\n      await axios.put(`http://localhost:5000/RecyclingBins/${bin._id}`, binData);\r\n      setShowUpdateModal(false);\r\n      resetForm();\r\n      fetchBin();\r\n    } catch (error) {\r\n      console.error('Error updating bin notes:', error);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      currentLevel: '',\r\n      notes: ''\r\n    });\r\n    setFormErrors({});\r\n  };\r\n\r\n  const openUpdateModal = () => {\r\n    setFormData({\r\n      currentLevel: bin.currentLevel.toString(),\r\n      notes: bin.notes || ''\r\n    });\r\n    setShowUpdateModal(true);\r\n  };\r\n\r\n  const requestCollection = async (requestType) => {\r\n    try {\r\n      // Validate required data\r\n      if (!branchId) {\r\n        alert('Error: Branch ID is missing. Please refresh the page.');\r\n        return;\r\n      }\r\n      \r\n      if (!bin || !bin._id) {\r\n        alert('Error: Bin information is missing. Please refresh the page.');\r\n        console.error('Bin data:', bin);\r\n        return;\r\n      }\r\n\r\n      // Log the exact IDs being used\r\n      console.log('üîç IDs being used:', {\r\n        branchId: branchId,\r\n        branchIdType: typeof branchId,\r\n        binId: bin._id,\r\n        binIdType: typeof bin._id,\r\n        binIdString: bin.binId,\r\n        fullBinObject: bin\r\n      });\r\n\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        alert('Error: Authentication token is missing. Please log in again.');\r\n        return;\r\n      }\r\n\r\n      console.log('üîÑ Creating collection request with data:', {\r\n        branchId,\r\n        binId: bin._id,\r\n        binIdString: bin.binId,\r\n        requestType,\r\n        binInfo: {\r\n          branchName: bin.branchName,\r\n          location: bin.location,\r\n          currentLevel: bin.currentLevel,\r\n          capacity: bin.capacity\r\n        }\r\n      });\r\n\r\n      const response = await axios.post('http://localhost:5000/RecyclingRequests/collection', {\r\n        branchId: branchId,\r\n        binId: bin._id, // Use MongoDB _id, not the string binId\r\n        requestType: requestType,\r\n        notes: `Collection request for ${requestType.toLowerCase()}`\r\n      }, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      console.log('‚úÖ Collection request response:', response.data);\r\n\r\n      if (response.data.success) {\r\n        alert(`Collection request submitted successfully! Request ID: ${response.data.request.requestId}`);\r\n        fetchBin();\r\n        fetchCollectionRequests();\r\n      } else {\r\n        alert(`Error: ${response.data.message || 'Unknown error occurred'}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('‚ùå Error creating collection request:', error);\r\n      \r\n      // Provide more specific error messages\r\n      if (error.response) {\r\n        console.error('Response status:', error.response.status);\r\n        console.error('Response data:', error.response.data);\r\n        \r\n        if (error.response.status === 401) {\r\n          alert('Authentication failed. Please log in again.');\r\n        } else if (error.response.status === 404) {\r\n          alert('Recycling bin not found. Please refresh the page.');\r\n        } else if (error.response.status === 400) {\r\n          alert(`Error: ${error.response.data.message || 'Invalid request data'}`);\r\n        } else if (error.response.status === 500) {\r\n          alert('Server error. Please try again later.');\r\n        } else {\r\n          alert(`Error: ${error.response.data.message || 'Failed to create collection request'}`);\r\n        }\r\n      } else if (error.request) {\r\n        console.error('Request error:', error.request);\r\n        alert('Network error. Please check your connection and try again.');\r\n      } else {\r\n        console.error('Error:', error.message);\r\n        alert('Failed to create collection request. Please try again.');\r\n      }\r\n    }\r\n  };\r\n\r\n  const emptyBin = async () => {\r\n    const confirmEmpty = window.confirm('Are you sure you want to request bin collection? This will send a request to the factory manager.');\r\n    if (confirmEmpty) {\r\n      await requestCollection('Empty Bin');\r\n    }\r\n  };\r\n\r\n  const notifyFactory = async () => {\r\n    const confirmNotify = window.confirm('Are you sure you want to request bin collection? This will send a request to the factory manager.');\r\n    if (confirmNotify) {\r\n      await requestCollection('90% Full');\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'Empty': return 'bg-green-100 text-green-800';\r\n      case 'Low': return 'bg-blue-100 text-blue-800';\r\n      case 'Medium': return 'bg-yellow-100 text-yellow-800';\r\n      case 'High': return 'bg-orange-100 text-orange-800';\r\n      case 'Critical': return 'bg-red-100 text-red-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getFillLevelColor = (percentage) => {\r\n    if (percentage >= 80) return 'text-red-600';\r\n    if (percentage >= 60) return 'text-orange-600';\r\n    if (percentage >= 40) return 'text-yellow-600';\r\n    if (percentage >= 20) return 'text-blue-600';\r\n    return 'text-green-600';\r\n  };\r\n\r\n  const getProgressBarColor = (percentage) => {\r\n    if (percentage >= 80) return 'bg-red-500';\r\n    if (percentage >= 60) return 'bg-orange-500';\r\n    if (percentage >= 40) return 'bg-yellow-500';\r\n    if (percentage >= 20) return 'bg-blue-500';\r\n    return 'bg-green-500';\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const showNotification = (message, type = 'success') => {\r\n    setNotification({ message, type });\r\n    setTimeout(() => setNotification(null), 5000);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!bin) {\r\n    return (\r\n      <div className=\"text-center py-8\">\r\n        <p className=\"text-gray-500\">No recycling bin found for this branch.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {/* Notification */}\r\n      {notification && (\r\n        <div className={`mb-4 p-4 rounded-lg ${\r\n          notification.type === 'success' \r\n            ? 'bg-green-100 border border-green-400 text-green-700' \r\n            : 'bg-red-100 border border-red-400 text-red-700'\r\n        }`}>\r\n          <div className=\"flex items-center\">\r\n            <span className=\"mr-2\">\r\n              {notification.type === 'success' ? '‚úÖ' : '‚ùå'}\r\n            </span>\r\n            {notification.message}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">Branch Recycling Bin</h2>\r\n        <div className=\"flex items-center space-x-4\">\r\n          <div className=\"text-sm text-gray-600\">\r\n            Branch: {branchName}\r\n          </div>\r\n          <button\r\n            onClick={() => Promise.all([fetchBin(), fetchRecyclingRequests()])}\r\n            disabled={loading || requestsLoading}\r\n            className=\"px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-200 transition-colors disabled:opacity-50\"\r\n          >\r\n            {loading || requestsLoading ? 'üîÑ Refreshing...' : 'üîÑ Refresh All'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Single Bin Display */}\r\n      <div className=\"max-w-2xl mx-auto\">\r\n        <div className=\"bg-white rounded-lg shadow-lg p-8\">\r\n          <div className=\"flex justify-between items-start mb-6\">\r\n            <div>\r\n              <h3 className=\"text-2xl font-semibold text-gray-900\">{bin.binId}</h3>\r\n              <p className=\"text-lg text-gray-600\">{bin.location}</p>\r\n            </div>\r\n            <span className={`inline-flex px-3 py-2 text-sm font-semibold rounded-full ${getStatusColor(bin.status)}`}>\r\n              {bin.status}\r\n            </span>\r\n          </div>\r\n\r\n          {/* Fill Level Progress */}\r\n          <div className=\"mb-8\">\r\n            <div className=\"flex justify-between text-lg mb-3\">\r\n              <span className=\"text-gray-700 font-medium\">Fill Level</span>\r\n              <span className={`font-bold text-xl ${getFillLevelColor(bin.fillPercentage)}`}>\r\n                {bin.fillPercentage.toFixed(1)}%\r\n              </span>\r\n            </div>\r\n            <div className=\"w-full bg-gray-200 rounded-full h-4\">\r\n              <div\r\n                className={`h-4 rounded-full transition-all duration-300 ${getProgressBarColor(bin.fillPercentage)}`}\r\n                style={{ width: `${bin.fillPercentage}%` }}\r\n              ></div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Capacity Information */}\r\n          <div className=\"grid grid-cols-2 gap-8 text-center mb-8\">\r\n            <div className=\"bg-gray-50 rounded-lg p-4\">\r\n              <p className=\"text-gray-600 text-sm font-medium\">Capacity</p>\r\n              <p className=\"text-2xl font-bold text-blue-600\">{bin.capacity} kg</p>\r\n            </div>\r\n            <div className=\"bg-gray-50 rounded-lg p-4\">\r\n              <p className=\"text-gray-600 text-sm font-medium\">Current Level</p>\r\n              <p className=\"text-2xl font-bold text-green-600\">{bin.currentLevel} kg</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Status Information */}\r\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\r\n            <div className=\"flex items-center\">\r\n              <div className=\"flex-shrink-0\">\r\n                <span className=\"text-2xl\">üå±</span>\r\n              </div>\r\n              <div className=\"ml-3\">\r\n                <h4 className=\"text-sm font-medium text-blue-800\">Recycling Status</h4>\r\n                <p className=\"text-sm text-blue-700\">\r\n                  {bin.fillPercentage >= 80 \r\n                    ? 'Critical: Bin is nearly full. Factory has been notified.' \r\n                    : bin.fillPercentage >= 60 \r\n                    ? 'High: Bin is getting full. Monitor closely.'\r\n                    : bin.fillPercentage >= 40 \r\n                    ? 'Medium: Bin is moderately filled.'\r\n                    : bin.fillPercentage >= 20 \r\n                    ? 'Low: Bin has some capacity remaining.'\r\n                    : 'Empty: Bin is ready for recycling.'\r\n                  }\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {bin.notes && (\r\n            <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\r\n              <p className=\"text-sm text-gray-600 font-medium mb-2\">Notes:</p>\r\n              <p className=\"text-sm text-gray-900\">{bin.notes}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex space-x-4\">\r\n            <button\r\n              onClick={openUpdateModal}\r\n              className=\"flex-1 bg-blue-600 text-white px-4 py-3 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors\"\r\n            >\r\n              Update Notes\r\n            </button>\r\n            <button\r\n              onClick={emptyBin}\r\n              className=\"flex-1 bg-green-600 text-white px-4 py-3 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors\"\r\n            >\r\n              Request Collection\r\n            </button>\r\n            {bin.fillPercentage >= 80 && !bin.isNotified && (\r\n              <button\r\n                onClick={notifyFactory}\r\n                className=\"flex-1 bg-red-600 text-white px-4 py-3 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors\"\r\n              >\r\n                Request Collection (90% Full)\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Information about automatic filling */}\r\n          <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n            <div className=\"flex items-center\">\r\n              <span className=\"text-blue-600 mr-2\">‚ÑπÔ∏è</span>\r\n              <span className=\"text-sm text-blue-800\">\r\n                <strong>Note:</strong> Bin filling happens automatically when customers submit recycling requests. \r\n                Branch managers can only monitor and manage the bin status.\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {bin.isNotified && (\r\n            <div className=\"mt-4 p-3 bg-orange-50 border border-orange-200 rounded-lg\">\r\n              <div className=\"flex items-center\">\r\n                <span className=\"text-orange-600 mr-2\">üîî</span>\r\n                <span className=\"text-sm text-orange-800 font-medium\">\r\n                  Factory has been notified about this bin\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Last Updated Info */}\r\n          <div className=\"mt-6 pt-4 border-t border-gray-200\">\r\n            <p className=\"text-xs text-gray-500 text-center\">\r\n              Last updated: {new Date(bin.updatedAt).toLocaleString()}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Customer Recycling Requests Section */}\r\n      <div className=\"mt-8 max-w-6xl mx-auto\">\r\n        <div className=\"bg-white rounded-lg shadow-lg p-6\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h3 className=\"text-xl font-semibold text-gray-900\">Customer Recycling Requests</h3>\r\n            <button\r\n              onClick={fetchRecyclingRequests}\r\n              disabled={requestsLoading}\r\n              className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors disabled:opacity-50\"\r\n            >\r\n              {requestsLoading ? 'Refreshing...' : 'üîÑ Refresh'}\r\n            </button>\r\n          </div>\r\n\r\n          {requestsLoading ? (\r\n            <div className=\"flex items-center justify-center py-8\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n            </div>\r\n          ) : recyclingRequests.length === 0 ? (\r\n            <div className=\"text-center py-8\">\r\n              <p className=\"text-gray-500\">No recycling requests found for this branch.</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Customer\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Waste Weight\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Points Earned\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Request Date\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Status\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Actions\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {recyclingRequests.map((request) => (\r\n                    <tr key={request._id} className=\"hover:bg-gray-50\">\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div>\r\n                          <div className=\"text-sm font-medium text-gray-900\">{request.customerName}</div>\r\n                          <div className=\"text-sm text-gray-500\">{request.customerEmail}</div>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-900 font-medium\">\r\n                          {request.wasteWeight} kg\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-900\">\r\n                          {request.pointsEarned} points\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-900\">\r\n                          {formatDate(request.requestDate)}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(request.status)}`}>\r\n                          {request.status}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                        {request.status === 'Pending' && (\r\n                          <div className=\"flex space-x-2\">\r\n                            <button\r\n                              onClick={() => handleApproveRequest(request._id)}\r\n                              disabled={approvalLoading}\r\n                              className=\"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 transition-colors disabled:opacity-50\"\r\n                            >\r\n                              {approvalLoading ? 'Processing...' : '‚úÖ Approve'}\r\n                            </button>\r\n                            <button\r\n                              onClick={() => handleRejectRequest(request._id)}\r\n                              disabled={approvalLoading}\r\n                              className=\"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors disabled:opacity-50\"\r\n                            >\r\n                              {approvalLoading ? 'Processing...' : '‚ùå Reject'}\r\n                            </button>\r\n                          </div>\r\n                        )}\r\n                        {request.status === 'Approved' && (\r\n                          <span className=\"text-green-600 font-medium\">‚úì Approved</span>\r\n                        )}\r\n                        {request.status === 'Rejected' && (\r\n                          <span className=\"text-red-600 font-medium\">‚úó Rejected</span>\r\n                        )}\r\n                        {request.status === 'Completed' && (\r\n                          <span className=\"text-blue-600 font-medium\">‚úì Completed</span>\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n\r\n          {/* Information about the approval process */}\r\n          <div className=\"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg\">\r\n            <div className=\"flex items-center\">\r\n              <span className=\"text-green-600 mr-2\">üí°</span>\r\n              <span className=\"text-sm text-green-800\">\r\n                <strong>How it works:</strong> When you approve a recycling request, the waste weight is automatically \r\n                added to the bin's current level. The bin will fill up based on the total weight of approved requests.\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Collection Requests Section */}\r\n      <div className=\"mt-8 max-w-6xl mx-auto\">\r\n        <div className=\"bg-white rounded-lg shadow-lg p-6\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h3 className=\"text-xl font-semibold text-gray-900\">Collection Requests</h3>\r\n            <button\r\n              onClick={fetchCollectionRequests}\r\n              disabled={collectionRequestsLoading}\r\n              className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors disabled:opacity-50\"\r\n            >\r\n              {collectionRequestsLoading ? 'Refreshing...' : 'üîÑ Refresh'}\r\n            </button>\r\n          </div>\r\n\r\n          {collectionRequestsLoading ? (\r\n            <div className=\"flex items-center justify-center py-8\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n            </div>\r\n          ) : collectionRequests.length === 0 ? (\r\n            <div className=\"text-center py-8\">\r\n              <p className=\"text-gray-500\">No collection requests found for this branch.</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Request ID\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Type\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Bin Level\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Status\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Request Date\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Notes\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {collectionRequests.map((request) => (\r\n                    <tr key={request._id} className=\"hover:bg-gray-50\">\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                        {request.requestId}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                          request.requestType === 'Empty Bin' \r\n                            ? 'bg-green-100 text-green-800' \r\n                            : 'bg-red-100 text-red-800'\r\n                        }`}>\r\n                          {request.requestType}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                        {request.currentLevel}kg / {request.capacity}kg ({request.fillPercentage.toFixed(1)}%)\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                          request.status === 'Pending' \r\n                            ? 'bg-yellow-100 text-yellow-800'\r\n                            : request.status === 'Approved'\r\n                            ? 'bg-green-100 text-green-800'\r\n                            : request.status === 'Completed'\r\n                            ? 'bg-blue-100 text-blue-800'\r\n                            : 'bg-red-100 text-red-800'\r\n                        }`}>\r\n                          {request.status}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                        {new Date(request.requestDate).toLocaleDateString()}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 text-sm text-gray-900\">\r\n                        {request.notes || '-'}\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n\r\n          {/* Information about collection requests */}\r\n          <div className=\"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n            <div className=\"flex items-center\">\r\n              <span className=\"text-blue-600 mr-2\">‚ÑπÔ∏è</span>\r\n              <span className=\"text-sm text-blue-800\">\r\n                <strong>Collection Requests:</strong> When you request collection, it sends a request to the factory manager. \r\n                The factory manager will approve and empty the bin, then update the status here.\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Update Bin Modal */}\r\n      {showUpdateModal && (\r\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\r\n          <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\r\n            <div className=\"mt-3\">\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Update Bin Notes</h3>\r\n              <form onSubmit={handleUpdate}>\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Bin ID</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={bin.binId}\r\n                      disabled\r\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Location</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={bin.location}\r\n                      disabled\r\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Capacity</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={`${bin.capacity} kg`}\r\n                      disabled\r\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Current Level</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={`${bin.currentLevel} kg (${bin.fillPercentage.toFixed(1)}%)`}\r\n                      disabled\r\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100\"\r\n                    />\r\n                    <p className=\"text-xs text-gray-500 mt-1\">\r\n                      Level is automatically updated when customers submit recycling requests\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Notes</label>\r\n                    <textarea\r\n                      value={formData.notes}\r\n                      onChange={(e) => setFormData({...formData, notes: e.target.value})}\r\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\r\n                      rows=\"3\"\r\n                      placeholder=\"Optional notes about this bin\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end space-x-3 mt-6\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setShowUpdateModal(false);\r\n                      resetForm();\r\n                    }}\r\n                    className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n                  >\r\n                    Update Notes\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BranchRecycleBin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}